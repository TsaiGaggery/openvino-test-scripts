<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenVINO Benchmark Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <rect width="24" height="24" rx="6" fill="#0071C5"/>
                        <path d="M7 12L10 15L17 8" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Benchmark Studio</span>
                </div>
            </div>
            <div class="sidebar-nav">
                <button class="nav-item active" data-tab="models">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                    <span>Models</span>
                </button>
                <button class="nav-item" data-tab="settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    <span>Settings</span>
                </button>
                <button class="nav-item" data-tab="run">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    <span>Run</span>
                </button>
                <button class="nav-item" data-tab="results">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                    <span>Results</span>
                </button>
            </div>
            <div class="sidebar-footer">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Connected</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <!-- Models Tab -->
            <section class="tab-panel active" id="tab-models">
                <div class="tab-header">
                    <h2>Models</h2>
                    <p>Manage models for benchmarking</p>
                </div>
                <div class="tab-body">
                    <!-- Model List -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Benchmark Models</h3>
                            <span class="badge" id="modelCount">0</span>
                        </div>
                        <div id="modelList" class="model-list">
                            <div class="empty-state">No models configured. Add models below.</div>
                        </div>
                    </div>

                    <!-- Add Local Model -->
                    <div class="section-card">
                        <h3>Add Local Model</h3>
                        <div class="local-browse-bar" id="localBrowseElectron" style="display:none;">
                            <button id="browseLocalBtn" class="btn btn-secondary">Browse Folder...</button>
                            <span id="localBrowseStatus" class="text-muted"></span>
                        </div>
                        <div class="local-browse-bar" id="localBrowseWeb">
                            <input type="text" id="localPathInput" class="input" placeholder="/absolute/path/to/model-folder">
                            <button id="addLocalPathBtn" class="btn btn-primary">Add</button>
                        </div>
                    </div>

                    <!-- Search HuggingFace -->
                    <div class="section-card">
                        <h3>Search HuggingFace Models</h3>
                        <div class="hf-search-bar">
                            <input type="text" id="hfSearchInput" class="input" placeholder="Search OpenVINO models...">
                            <button id="hfSearchBtn" class="btn btn-primary">Search</button>
                        </div>
                        <div class="hf-filter-tabs">
                            <button class="filter-tab active" data-filter="all">All</button>
                            <button class="filter-tab" data-filter="npu">NPU</button>
                            <button class="filter-tab" data-filter="gpu">GPU / CPU</button>
                        </div>
                        <div id="hfResults" class="hf-results">
                            <div class="empty-state">Search for models above</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Tab -->
            <section class="tab-panel" id="tab-settings">
                <div class="tab-header">
                    <h2>Settings</h2>
                    <p>Configure benchmark parameters</p>
                </div>
                <div class="tab-body">
                    <!-- Devices -->
                    <div class="section-card">
                        <h3>Devices</h3>
                        <div id="deviceCheckboxes" class="device-grid">
                            <div class="text-muted">Loading devices...</div>
                        </div>
                    </div>

                    <!-- Generation Config -->
                    <div class="section-card">
                        <h3>Generation Config</h3>
                        <div class="settings-grid">
                            <div class="setting-row">
                                <label>Max New Tokens</label>
                                <div class="slider-group">
                                    <input type="range" id="maxTokensSlider" min="10" max="5000" step="10" value="100">
                                    <span id="maxTokensValue" class="slider-value">100</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Temperature</label>
                                <div class="slider-group">
                                    <input type="range" id="temperatureSlider" min="0" max="2" step="0.1" value="0.7">
                                    <span id="temperatureValue" class="slider-value">0.7</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Top P</label>
                                <div class="slider-group">
                                    <input type="range" id="topPSlider" min="0" max="1" step="0.05" value="0.9">
                                    <span id="topPValue" class="slider-value">0.9</span>
                                </div>
                            </div>
                            <div class="setting-row">
                                <label>Do Sample</label>
                                <label class="toggle">
                                    <input type="checkbox" id="doSampleToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-row">
                                <label>Run Warmup</label>
                                <label class="toggle">
                                    <input type="checkbox" id="warmupToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Test Prompts -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Test Prompts</h3>
                            <button id="addPromptBtn" class="btn btn-sm btn-secondary">+ Add Prompt</button>
                        </div>
                        <div id="promptList" class="prompt-list"></div>
                    </div>

                    <div class="action-bar">
                        <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
                        <span id="settingsStatus" class="text-muted"></span>
                    </div>
                </div>
            </section>

            <!-- Run Tab -->
            <section class="tab-panel" id="tab-run">
                <div class="tab-header">
                    <h2>Run Benchmark</h2>
                    <p>Execute benchmark and monitor progress</p>
                </div>
                <div class="tab-body">
                    <!-- Summary -->
                    <div class="summary-cards" id="runSummary">
                        <div class="summary-card">
                            <div class="summary-value" id="summaryModels">0</div>
                            <div class="summary-label">Models</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="summaryDevices">0</div>
                            <div class="summary-label">Devices</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-value" id="summaryPrompts">0</div>
                            <div class="summary-label">Prompts</div>
                        </div>
                    </div>

                    <!-- Progress -->
                    <div class="progress-section" id="progressSection" style="display:none;">
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="progressBar" style="width:0%"></div>
                        </div>
                        <div class="progress-text" id="progressText"></div>
                    </div>

                    <!-- Controls -->
                    <div class="run-controls">
                        <button id="runBenchmarkBtn" class="btn btn-primary btn-lg">Run Benchmark</button>
                        <button id="cancelBenchmarkBtn" class="btn btn-danger btn-lg" style="display:none;">Cancel</button>
                        <button id="viewResultsBtn" class="btn btn-secondary btn-lg" style="display:none;">View Results</button>
                    </div>

                    <!-- Log Panel -->
                    <div class="log-panel" id="logPanel">
                        <div class="log-header">
                            <span>Output</span>
                            <button id="clearLogBtn" class="btn btn-sm btn-ghost">Clear</button>
                        </div>
                        <pre id="logContent" class="log-content">Waiting to start...\n</pre>
                    </div>
                </div>
            </section>

            <!-- Results Tab -->
            <section class="tab-panel" id="tab-results">
                <div class="tab-header">
                    <h2>Results</h2>
                    <div class="tab-header-actions">
                        <select id="historySelect" class="input input-sm">
                            <option value="latest">Latest Run</option>
                        </select>
                    </div>
                </div>
                <div class="tab-body">
                    <div id="noResults" class="empty-state">
                        No benchmark results yet. Run a benchmark first.
                    </div>
                    <div id="resultsContent" style="display:none;">
                        <!-- Summary Cards -->
                        <div class="summary-cards">
                            <div class="summary-card">
                                <div class="summary-value" id="resultsTimestamp">-</div>
                                <div class="summary-label">Timestamp</div>
                            </div>
                            <div class="summary-card highlight">
                                <div class="summary-value" id="resultsBest">-</div>
                                <div class="summary-label">Best Performance</div>
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="charts-grid">
                            <div class="section-card chart-card">
                                <h3>Inference Speed (tokens/sec)</h3>
                                <canvas id="speedChart"></canvas>
                            </div>
                            <div class="section-card chart-card">
                                <h3>Model Load Time (seconds)</h3>
                                <canvas id="loadTimeChart"></canvas>
                            </div>
                        </div>

                        <!-- Results Table -->
                        <div class="section-card">
                            <h3>Detailed Results</h3>
                            <div class="table-container">
                                <table id="resultsTable" class="results-table">
                                    <thead>
                                        <tr>
                                            <th data-sort="model">Model</th>
                                            <th data-sort="device">Device</th>
                                            <th data-sort="speed">Speed (tok/s)</th>
                                            <th data-sort="load">Load Time (s)</th>
                                            <th data-sort="avg">Avg Time (s)</th>
                                            <th data-sort="tokens">Total Tokens</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultsTableBody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>
